(this["webpackJsonpmy-project"]=this["webpackJsonpmy-project"]||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(32),l=n(5),o=n(4),s=n(8),r=n(35),i=Object(r.b)({name:"auth",initialState:{isAuth:!1,user:{}},reducers:{login:function(e,t){var n=t.payload;e.isAuth=!0,e.user=n},logout:function(e){e.isAuth=!1,e.user={}}}}),d=i.reducer,u=i.actions,b=u.login,j=u.logout,x=function(e){return e.auth},m=n(0),h=function(){var e=Object(s.b)(),t=Object(s.c)(x).isAuth,n=Object(o.g)();return Object(m.jsx)("header",{className:"bg-yellow-500 shadow",children:Object(m.jsxs)("div",{className:"container flex justify-between py-2 md:py-4",children:[Object(m.jsx)(l.b,{to:"/",className:"inline-block font-bold text-gray-800 text-lg md:text-2xl cursor-pointer",children:"BLOG"}),Object(m.jsx)("div",{className:"inline-block",children:Object(m.jsx)("ul",{className:"flex gap-2 md:gap-4",children:t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/my-blogs",className:"py-2 px-3 hover:underline text-white text-sm md:text-base md:font-medium",children:"My Blogs"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{onClick:function(t){t.preventDefault(),localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token"),e(j()),n("/")},to:"/logout",className:"py-2 px-3 text-white text-sm md:text-base md:font-medium bg-red-600 rounded shadow",children:"Logout"})})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/login",className:"py-2 px-3 text-white text-sm md:text-base md:font-medium font-white bg-gray-600 rounded shadow",children:"Login"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{to:"/signup",className:"py-2 px-3 text-white text-sm md:text-base md:font-medium font-white bg-gray-600 rounded shadow",children:"Sign Up"})})]})})})]})})},g=function(){return Object(m.jsxs)("div",{className:"bg-yellow-50",children:[Object(m.jsx)(h,{}),Object(m.jsx)("div",{className:"container min-h-mobileBody md:min-h-desktopBody",children:Object(m.jsx)(o.a,{})}),Object(m.jsx)("footer",{className:"py-10 bg-yellow-500 border-t",children:Object(m.jsx)("div",{className:"container text-center",children:"Footer Text"})})]})},O=n(6),f=n(3),p=n(19),v=function(e){var t=e.name,n=e.slug;return Object(m.jsx)(l.b,{to:"/tag/"+n,className:"inline-block rounded text-xs px-1 text-white bg-black",children:t})},y=function(e){var t=e.blog;return Object(m.jsxs)("div",{className:"py-2 px-4 transition-all duration-100 hover:shadow-lg border-t shadow rounded bg-yellow-100",children:[Object(m.jsxs)(l.b,{to:"/blog/"+t.slug,className:"text-blue-500 pb-3 block hover:underline md:text-lg font-bold",children:[t.title.substr(0,50)," ",t.title.length>50?"...":""]}),Object(m.jsx)("div",{className:"flex gap-1 flex-wrap",children:t.tags.map((function(e){return Object(m.jsx)(v,{name:e.name,slug:e.slug},e._id)}))}),Object(m.jsxs)("div",{className:"my-2",children:[t.body.substr(0,350)," ",t.body.length>350?"...":"","  ",Object(m.jsx)(l.b,{to:"/blog/"+t.slug,className:"text-blue-500 underline pl-1",children:"Read More"})]})]})},N=n(20),w=n.n(N),k=function(e,t,n){return new Promise((function(c,a){w.a.get(e,{headers:{"auth-token":t&&localStorage.getItem("auth-token")||""},params:n}).then((function(e){var t=e.data;c(t)})).catch((function(e){var t=e.response;a(t.data)}))}))},S=function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],l=Object(c.useState)(0),o=Object(f.a)(l,2),s=o[0],r=o[1];Object(c.useEffect)((function(){i()}),[]);var i=function(){k("/api/blog/get",!1,{offset:n.length}).then((function(e){var t=e.data;a([].concat(Object(O.a)(n),Object(O.a)(t.blog))),r(t.count)})).catch((function(e){r(n.length)}))};return Object(m.jsx)(p.a,{dataLength:n.length,next:i,hasMore:n.length!==s,endMessage:Object(m.jsx)("p",{className:"py-10 font-bold",style:{textAlign:"center"},children:Object(m.jsx)("b",{children:"Yay! You have seen it all"})}),refreshFunction:function(){k("/api/blog/get",!1,{offset:0}).then((function(e){var t=e.data;a(Object(O.a)(t.blog)),r(t.count)})).catch((function(e){r(n.length)}))},pullDownToRefresh:!0,className:"hello",loader:Object(m.jsx)("div",{className:"loader text-center my-10 font-bold",children:"Getting Blogs ..."},0),children:Object(m.jsx)("div",{className:"py-4 md:px-2 gap-4 grid grid-cols-1",children:n.map((function(e){return Object(m.jsx)(y,{blog:e},e._id)}))})})},C=function(){var e=Object(o.h)().tag,t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],l=n[1],s=Object(c.useState)(0),r=Object(f.a)(s,2),i=r[0],d=r[1];Object(c.useEffect)((function(){u()}),[e]);var u=function(){k("/api/blog/get",!1,{offset:0,tag:e}).then((function(e){var t=e.data;l(Object(O.a)(t.blog)),d(t.count)})).catch((function(e){d(a.length)}))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(p.a,{dataLength:a.length,next:function(){k("/api/blog/get",!1,{offset:a.length,tag:e}).then((function(e){var t=e.data;l([].concat(Object(O.a)(a),Object(O.a)(t.blog))),d(t.count)})).catch((function(e){d(a.length)}))},hasMore:a.length!==i,endMessage:Object(m.jsx)("p",{className:"py-10 font-bold",style:{textAlign:"center"},children:Object(m.jsx)("b",{children:"Yay! You have seen it all"})}),refreshFunction:u,pullDownToRefresh:!0,className:"hello",loader:Object(m.jsx)("div",{className:"loader text-center my-10 font-bold",children:"Getting Blogs ..."},0),children:Object(m.jsx)("div",{className:"py-4 md:px-2 gap-4 grid grid-cols-1",children:a.map((function(e){return Object(m.jsx)(y,{blog:e},e._id)}))})})})},A=function(e,t,n,c){return new Promise((function(a,l){w.a.post(e,t,{headers:{"auth-token":n&&localStorage.getItem("auth-token")||""},params:c}).then((function(e){var t=e.data;a(t)})).catch((function(e){var t=e.response;l(t.data)}))}))},D=function(e){var t=e.slug,n=e.commented,a=Object(c.useState)(""),l=Object(f.a)(a,2),o=l[0],s=l[1],r=Object(c.useState)(!1),i=Object(f.a)(r,2),d=i[0],u=i[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("hr",{className:"mt-10"}),Object(m.jsx)("p",{className:"text-xl text-gray-500 font-medium my-2",children:"Leave a comment!"}),Object(m.jsx)("textarea",{onChange:function(e){return s(e.target.value)},value:o,className:"p-2 border-2 text-gray-600 block w-full rounded focus:outline-none",name:"",rows:"3"}),Object(m.jsx)("button",{onClick:function(){d||o&&(u(!0),A("/api/blog/comment/"+t,{comment:o},!0,{}).then((function(e){u(!1),s(""),n()})).catch((function(e){u(!1),console.log(e)})))},className:"my-2 bg-blue-600 text-white px-3 py-1 rounded shadow",children:"Save"})]})},E=function(e){var t=e.data,n=e.index,c=e.deleteComment,a=e.author,l=Object(s.c)(x).user;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"my-2 pl-5",children:[Object(m.jsxs)("p",{className:"text-gray-800 font-bold text-sm",children:["By ",t.commenter.fullName]}),Object(m.jsx)("p",{className:"text-gray-800 text-xs underline mb-1",children:new Date(t.createdAt).toDateString()}),Object(m.jsx)("p",{className:"text-gray-600 text-sm pb-3 ",children:t.comment}),(null===l||void 0===l?void 0:l._id)===a&&Object(m.jsx)("button",{onClick:function(){return c(n)},className:"text-sm font-bold rounded text-white py-1 px-3 bg-red-600 shadow hover:shadow-lg transition-all duration-100",children:"Delete"})]})})},I=function(){var e,t,n=Object(o.h)().slug,a=Object(c.useState)(null),l=Object(f.a)(a,2),s=l[0],r=l[1];Object(c.useEffect)((function(){k("/api/blog/single/"+n,!1,{}).then((function(e){r(e.data.blog)})).then((function(e){return console.log(e)}))}),[n]);var i=function(e){k("/api/blog/comment/"+n+"/"+e,!0,{}).then((function(e){k("/api/blog/single/"+n,!1,{}).then((function(e){r(e.data.blog)})).then((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))};return Object(m.jsxs)("div",{className:"py-2 my-5 px-4",children:[Object(m.jsx)("h2",{className:"text-blue-500 pb-3 block hover:underline md:text-lg font-bold",children:(null===s||void 0===s?void 0:s.title)||""}),Object(m.jsx)("div",{className:"flex gap-1 flex-wrap",children:(null===s||void 0===s||null===(e=s.tags)||void 0===e?void 0:e.length)>0&&s.tags.map((function(e){return Object(m.jsx)(v,{name:e.name,slug:e.slug},e._id)}))}),Object(m.jsx)("div",{className:"my-2 whitespace-pre-line pt-10",children:(null===s||void 0===s?void 0:s.body)||""}),Object(m.jsx)("hr",{className:"mt-10"}),Object(m.jsx)("h2",{className:"text-lg text-gray-800 mt-2",children:"Comments"}),(null===s||void 0===s||null===(t=s.comments)||void 0===t?void 0:t.length)>0&&s.comments.map((function(e,t){return Object(m.jsx)(E,{author:s.author._id,index:t,data:e,deleteComment:i},e.comment)})),Object(m.jsx)(D,{slug:n,commented:function(){k("/api/blog/single/"+n,!1,{}).then((function(e){r(e.data.blog)})).then((function(e){return console.log(e)}))}})]})},B=function(e){var t=e.blog,n=e.onDelete;return Object(m.jsxs)("div",{className:"py-2 px-4 transition-all duration-100 hover:shadow-lg border-t shadow rounded bg-yellow-100",children:[Object(m.jsxs)(l.b,{to:"/blog/"+t.slug,className:"text-blue-500 pb-3 block hover:underline md:text-lg font-bold",children:[t.title.substr(0,50)," ",t.title.length>50?"...":""]}),Object(m.jsx)("div",{className:"flex gap-1 flex-wrap",children:t.tags.map((function(e){return Object(m.jsx)(v,{name:e.name,slug:e.slug},e._id)}))}),Object(m.jsxs)("div",{className:"my-2",children:[t.body.substr(0,350)," ",t.body.length>350?"...":"","  ",Object(m.jsx)(l.b,{to:"/blog/"+t.slug,className:"text-blue-500 underline pl-1",children:"Read More"})]}),Object(m.jsxs)("div",{className:"my-2 flex justify-end gap-2",children:[Object(m.jsx)(l.b,{className:"text-sm font-bold rounded text-white py-1 px-3 bg-yellow-600 shadow hover:shadow-lg transition-all duration-100",to:"/my-blogs/edit/"+t.slug,children:"Edit"}),Object(m.jsx)("button",{onClick:function(){return n(t._id)},className:"text-sm font-bold rounded text-white py-1 px-3 bg-red-600 shadow hover:shadow-lg transition-all duration-100",children:"Delete"})]})]})},F=function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(0),s=Object(f.a)(o,2),r=s[0],i=s[1];Object(c.useEffect)((function(){u()}),[]);var d=function(){k("/api/blog/get",!1,{offset:0}).then((function(e){var t=e.data;a(Object(O.a)(t.blog)),i(t.count)})).catch((function(e){i(n.length)}))},u=function(){k("/api/blog/user/get",!0,{offset:n.length}).then((function(e){var t=e.data;a([].concat(Object(O.a)(n),Object(O.a)(t.blog))),i(t.count)})).catch((function(e){i(n.length)}))};return Object(m.jsxs)("div",{className:"py-4 md:px-2 gap-4 grid grid-cols-1",children:[Object(m.jsx)("div",{className:"my-10",children:Object(m.jsxs)("div",{className:"flex justify-between",children:[Object(m.jsx)("h2",{className:"text-gray-700 inline font-bold text-lg md:text-xl",children:"My Blogs"}),Object(m.jsx)(l.b,{className:"text-white px-4 py-1 font-bold rounded bg-blue-500",to:"/my-blogs/create",children:"New Blog"})]})}),Object(m.jsx)(p.a,{dataLength:n.length,next:u,hasMore:n.length!==r,endMessage:Object(m.jsx)("p",{className:"py-10 font-bold",style:{textAlign:"center"},children:Object(m.jsx)("b",{children:"Yay! You have seen it all"})}),refreshFunction:d,pullDownToRefresh:!0,className:"hello",loader:Object(m.jsx)("div",{className:"loader text-center my-10 font-bold",children:"Getting Blogs ..."},0),children:Object(m.jsx)("div",{className:"py-4 md:px-2 gap-4 grid grid-cols-1",children:n.map((function(e){return Object(m.jsx)(B,{onDelete:function(e){return function(e){A("/api/blog/delete/"+e,{},!0,{}).then((function(e){d()})).catch((function(e){return console.log(e)}))}(e)},blog:e},e._id)}))})})]})},T=function(){return Object(m.jsx)("div",{className:"h-full w-full flex justify-center items-center",children:Object(m.jsx)("h2",{className:"text-yellow-500 text-xl md:text-2xl text-center my-12",children:"404 Page Not Found!"})})},_=n(12),L=n(7),M=function(){var e=Object(s.c)(x).isAuth,t=Object(o.g)(),n=Object(s.b)(),a=Object(c.useState)({email:"",password:""}),l=Object(f.a)(a,2),r=l[0],i=l[1],d=function(e){i(Object(L.a)(Object(L.a)({},r),{},Object(_.a)({},e.target.name,e.target.value)))},u=Object(c.useState)(!1),j=Object(f.a)(u,2),h=j[0],g=j[1],O=Object(c.useState)({}),p=Object(f.a)(O,2),v=p[0],y=p[1];Object(c.useEffect)((function(){e&&t("/my-blogs")}),[e,t,n]);return Object(m.jsxs)("div",{className:"pt-8",children:[Object(m.jsx)("p",{className:"mx-auto md:w-1/2 w-full my-1 text-red-500",children:(null===v||void 0===v?void 0:v.message)||""}),Object(m.jsx)("input",{value:r.email,onChange:d,name:"email",type:"text",placeholder:"Email Address",className:"block  w-full md:w-1/2 border-2 border-black text-lg py-1 px-2 my-2 rounded focus:outline-none font-bold mx-auto"}),Object(m.jsx)("p",{className:"text-xs mx-auto md:w-1/2 w-full my-1 text-red-500",children:(null===v||void 0===v?void 0:v.email)||""}),Object(m.jsx)("input",{value:r.password,name:"password",onChange:d,type:"password",placeholder:"Password",className:"block  w-full md:w-1/2 border-2 border-black text-lg py-1 px-2 mt-8 mb-4 rounded focus:outline-none font-bold mx-auto"}),Object(m.jsx)("p",{className:"text-xs mx-auto md:w-1/2 w-full my-1 text-red-500",children:(null===v||void 0===v?void 0:v.password)||""}),Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsx)("button",{type:"button",onClick:function(){h||(g(!0),y({}),A("/api/auth/login",r,!1,{}).then((function(e){g(!1),localStorage.setItem("auth-token",e.data.accessToken),localStorage.setItem("refresh-token",e.data.refreshToken),n(b(e.data.user)),t("/my-blogs")})).catch((function(e){g(!1),y(Object(L.a)(Object(L.a)({},null===e||void 0===e?void 0:e.errors),{},{message:null===e||void 0===e?void 0:e.message}))})))},className:"text-white w-full md:w-1/2 mt-8 bg-blue-500 py-1 px-5 rounded text-lg focus:outline-none",children:"Login"})})]})},P=function(){return Object(m.jsxs)("div",{className:"py-5 mt-10 ",children:[Object(m.jsx)("h2",{className:"text-center text-lg md:text-2xl font-bold text-gray-700 underline",children:"Login"}),Object(m.jsxs)("p",{className:"text-center text-xs",children:["Don't you have any account! ",Object(m.jsx)(l.b,{to:"/signup",className:"text-blue-500 hover:underline",children:"Signup here."})]}),Object(m.jsx)(M,{})]})},Y=function(){var e=Object(s.c)(x).isAuth,t=Object(o.g)(),n=Object(s.b)(),a=Object(c.useState)({fullName:"",email:"",password:""}),l=Object(f.a)(a,2),r=l[0],i=l[1],d=function(e){i(Object(L.a)(Object(L.a)({},r),{},Object(_.a)({},e.target.name,e.target.value)))},u=Object(c.useState)(!1),j=Object(f.a)(u,2),h=j[0],g=j[1],O=Object(c.useState)({}),p=Object(f.a)(O,2),v=p[0],y=p[1];Object(c.useEffect)((function(){e&&t("/my-blogs")}),[e,t,n]);return Object(m.jsxs)("div",{className:"pt-8",children:[Object(m.jsx)("input",{value:r.fullName,type:"text",placeholder:"Full Name",name:"fullName",onChange:d,className:"block w-full md:w-1/2 border-2 border-black text-lg py-1 px-2 my-2 rounded focus:outline-none font-bold mx-auto"}),Object(m.jsx)("p",{className:"text-xs mx-auto md:w-1/2 w-full my-1 text-red-500",children:(null===v||void 0===v?void 0:v.fullName)||""}),Object(m.jsx)("input",{value:r.email,onChange:d,name:"email",type:"text",placeholder:"Email Address",className:"block  w-full md:w-1/2 border-2 border-black text-lg py-1 px-2 mt-8 rounded focus:outline-none font-bold mx-auto"}),Object(m.jsx)("p",{className:"text-xs mx-auto md:w-1/2 w-full my-1 text-red-500",children:(null===v||void 0===v?void 0:v.email)||""}),Object(m.jsx)("input",{value:r.password,onChange:d,name:"password",type:"password",placeholder:"Password",className:"block  w-full md:w-1/2 border-2 border-black text-lg py-1 px-2 mt-8 mb-4 rounded focus:outline-none font-bold mx-auto"}),Object(m.jsx)("p",{className:"text-xs mx-auto md:w-1/2 w-full my-1 text-red-500",children:(null===v||void 0===v?void 0:v.password)||""}),Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsx)("button",{onClick:function(){h||(g(!0),y({}),A("/api/auth/signup",r,!1,{}).then((function(e){g(!1),localStorage.setItem("auth-token",e.data.accessToken),localStorage.setItem("refresh-token",e.data.refreshToken),n(b(e.data.user)),t("/my-blogs")})).catch((function(e){g(!1),y(Object(L.a)({},null===e||void 0===e?void 0:e.errors))})))},type:"button",className:"text-white w-full md:w-1/2 mt-8 bg-blue-500 py-1 px-5 rounded text-lg focus:outline-none",children:"Signup"})})]})},R=function(){return Object(m.jsxs)("div",{className:"py-5 mt-10 ",children:[Object(m.jsx)("h2",{className:"text-center text-lg md:text-2xl font-bold text-gray-700 underline",children:"Signup"}),Object(m.jsxs)("p",{className:"text-center text-xs",children:["Already have account! ",Object(m.jsx)(l.b,{to:"/login",className:"text-blue-500 hover:underline",children:"Login here."})]}),Object(m.jsx)(Y,{})]})},G=n(34),W=function(){var e=Object(o.g)(),t=Object(c.useState)([]),n=Object(f.a)(t,2),a=n[0],l=n[1],s=Object(c.useState)([]),r=Object(f.a)(s,2),i=r[0],d=r[1];Object(c.useEffect)((function(){k("/api/tag/get",!0).then((function(e){var t=e.data.map((function(e){var t=e.name;return{id:t,text:t}}));d(t)})).catch((function(e){return console.log(e)}))}),[]);var u=Object(c.useState)({title:"",body:""}),b=Object(f.a)(u,2),j=b[0],x=b[1],h=function(e){x(Object(L.a)(Object(L.a)({},j),{},Object(_.a)({},e.target.name,e.target.value)))},g=Object(c.useState)(!1),p=Object(f.a)(g,2),v=p[0],y=p[1],N=Object(c.useState)({}),w=Object(f.a)(N,2),S=w[0],C=w[1];return Object(m.jsxs)("div",{className:"pt-8",children:[Object(m.jsx)("input",{name:"title",onChange:h,type:"text",placeholder:"Title",className:"block w-full border-2 border-black text-lg py-1 px-2 my-2 rounded focus:outline-none font-bold mx-auto"}),Object(m.jsx)("p",{className:"text-xs my-1 text-red-500",children:(null===S||void 0===S?void 0:S.title)||""}),Object(m.jsx)("textarea",{name:"body",onChange:h,type:"text",rows:10,placeholder:"Write blog here",className:"block w-full  border-2 border-black text-lg py-1 px-2 mt-8 rounded focus:outline-none mx-auto"}),Object(m.jsx)("p",{className:"text-xs my-1 text-red-500",children:(null===S||void 0===S?void 0:S.body)||""}),Object(m.jsx)(G.WithContext,{suggestions:i,tags:a,handleAddition:function(e){l([].concat(Object(O.a)(a),[e]))},delimiters:[11,13,118],handleDelete:function(e){var t=Object(O.a)(a);t.splice(e,1),l(Object(O.a)(t))},handleDrag:function(e,t,n){var c=Object(O.a)(a);c.splice(t,1),c.splice(n,0,e),l(Object(O.a)(c))}}),Object(m.jsx)("p",{className:"text-xs my-1 text-red-500",children:(null===S||void 0===S?void 0:S.tags)||""}),Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsx)("button",{type:"button",onClick:function(){if(!v){var t=a.map((function(e){return e.text}));y(!0),C({}),A("/api/blog/create",Object(L.a)(Object(L.a)({},j),{},{tags:t}),!0,{}).then((function(t){y(!1),e("/my-blogs")})).catch((function(e){y(!1),C(Object(L.a)({},null===e||void 0===e?void 0:e.errors))}))}},className:"text-white w-full mt-8 bg-blue-500 py-1 px-5 rounded text-lg focus:outline-none",children:"Create"})})]})},J=function(){return Object(m.jsxs)("div",{className:"py-5 ",children:[Object(m.jsx)("h2",{className:"text-center text-lg md:text-2xl font-bold text-gray-700 underline",children:"Create New Blog"}),Object(m.jsx)(W,{})]})},U=function(){var e=Object(o.h)().slug,t=Object(o.g)(),n=Object(c.useState)([]),a=Object(f.a)(n,2),l=a[0],s=a[1],r=Object(c.useState)([]),i=Object(f.a)(r,2),d=i[0],u=i[1],b=Object(c.useState)({title:"",body:""}),j=Object(f.a)(b,2),x=j[0],h=j[1];Object(c.useEffect)((function(){k("/api/blog/single/"+e,!1,{}).then((function(e){var t=e.data.blog.tags.map((function(e){return{id:e.name,text:e.name}}));s(t),h({title:e.data.blog.title,body:e.data.blog.body})})).catch((function(e){return console.log(e)})),k("/api/tag/get",!0).then((function(e){var t=e.data.map((function(e){var t=e.name;return{id:t,text:t}}));u(t)})).catch((function(e){return console.log(e)}))}),[]);var g=function(e){h(Object(L.a)(Object(L.a)({},x),{},Object(_.a)({},e.target.name,e.target.value)))},p=Object(c.useState)(!1),v=Object(f.a)(p,2),y=v[0],N=v[1],w=Object(c.useState)({}),S=Object(f.a)(w,2),C=S[0],D=S[1];return Object(m.jsxs)("div",{className:"pt-8",children:[Object(m.jsx)("input",{name:"title",onChange:g,value:x.title,type:"text",placeholder:"Title",className:"block w-full border-2 border-black text-lg py-1 px-2 my-2 rounded focus:outline-none font-bold mx-auto"}),Object(m.jsx)("p",{className:"text-xs my-1 text-red-500",children:(null===C||void 0===C?void 0:C.title)||""}),Object(m.jsx)("textarea",{value:x.body,name:"body",onChange:g,type:"text",rows:10,placeholder:"Write blog here",className:"block w-full  border-2 border-black text-lg py-1 px-2 mt-8 rounded focus:outline-none mx-auto"}),Object(m.jsx)("p",{className:"text-xs my-1 text-red-500",children:(null===C||void 0===C?void 0:C.body)||""}),Object(m.jsx)(G.WithContext,{suggestions:d,tags:l,handleAddition:function(e){s([].concat(Object(O.a)(l),[e]))},delimiters:[11,13,118],handleDelete:function(e){var t=Object(O.a)(l);t.splice(e,1),s(Object(O.a)(t))},handleDrag:function(e,t,n){var c=Object(O.a)(l);c.splice(t,1),c.splice(n,0,e),s(Object(O.a)(c))}}),Object(m.jsx)("p",{className:"text-xs my-1 text-red-500",children:(null===C||void 0===C?void 0:C.tags)||""}),Object(m.jsx)("div",{className:"flex justify-center",children:Object(m.jsx)("button",{type:"button",onClick:function(){if(!y){var n=l.map((function(e){return e.text}));N(!0),D({}),A("/api/blog/update/"+e,Object(L.a)(Object(L.a)({},x),{},{tags:n}),!0,{}).then((function(e){N(!1),t("/my-blogs")})).catch((function(e){N(!1),D(Object(L.a)({},null===e||void 0===e?void 0:e.errors))}))}},className:"text-white w-full mt-8 bg-blue-500 py-1 px-5 rounded text-lg focus:outline-none",children:"Update"})})]})},q=function(){return Object(m.jsxs)("div",{className:"py-5 ",children:[Object(m.jsx)("h2",{className:"text-center text-lg md:text-2xl font-bold text-gray-700 underline",children:"Edit Blog"}),Object(m.jsx)(U,{})]})},z=function(){return Object(m.jsx)(o.d,{children:Object(m.jsxs)(o.b,{path:"",element:Object(m.jsx)(g,{}),children:[Object(m.jsx)(o.b,{index:!0,element:Object(m.jsx)(S,{})}),Object(m.jsxs)(o.b,{path:"my-blogs",children:[Object(m.jsx)(o.b,{index:!0,element:Object(m.jsx)(F,{})}),Object(m.jsx)(o.b,{path:"edit/:slug",element:Object(m.jsx)(q,{})}),Object(m.jsx)(o.b,{path:"create",element:Object(m.jsx)(J,{})})]}),Object(m.jsx)(o.b,{path:"tag/:tag",element:Object(m.jsx)(C,{})}),Object(m.jsx)(o.b,{path:"blog/:slug",element:Object(m.jsx)(I,{})}),Object(m.jsx)(o.b,{path:"login",element:Object(m.jsx)(P,{})}),Object(m.jsx)(o.b,{path:"signup",element:Object(m.jsx)(R,{})}),Object(m.jsx)(o.b,{path:"*",element:Object(m.jsx)(T,{})})]})})},H=function(){return new Promise((function(e,t){localStorage.getItem("refresh-token")||t("not token live!"),w.a.post("/api/auth/refresh",{},{headers:{"refresh-token":localStorage.getItem("refresh-token")}}).then((function(t){var n,c=t.data;localStorage.setItem("auth-token",null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.accessToken),e(c)})).catch((function(e){var n,c=e.response;401===(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.status_code)&&(localStorage.removeItem("auth-token"),localStorage.removeItem("refresh-token")),t(c.data)}))}))};var K=function(){var e=Object(s.b)();return Object(c.useEffect)((function(){A("/api/auth/verify",{},!0).then((function(t){e(b(t))})).catch((function(t){401===t.status_code&&H().then((function(t){return e(b(t.data.user))})).catch((function(t){return e(j())}))}))}),[]),Object(m.jsx)(l.a,{children:Object(m.jsx)(z,{})})},Q=n(11),V=Object(Q.b)({auth:d}),X=Object(r.a)({reducer:V});n(187);Object(a.render)(Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(s.a,{store:X,children:Object(m.jsx)(K,{})})}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.c09f4e2e.chunk.js.map